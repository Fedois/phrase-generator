<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PerleForElisa</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Qwitcher+Grypen:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <main class="text-center">
        <h1 style="font-size: 5em; display: inline;">Pearls for my love <span title="Change theme" class="heart d-inline-block">&hearts;</span></h1>

        <div data-bs-toggle="modal" data-bs-target="#exampleModal" class="box" style="margin: 2rem 0; padding: 2rem; max-width: 700px;">
            <p aria-colspan="border border-dark" style="padding: 2rem; font-size: 2em;" class="pearl"><q> </q></p>
            <p class="pearls-end fs-2 border p-2">Congratulations! <br> you have collected all the pearls <br> &hearts; &hearts; &hearts; &hearts; &hearts;</p>
        </div>

        <button class="bg-danger border border-danger" style="font-size: 1.5em;">Generate Pearl</button>
        <p style="font-size: 2em; display: none;" class="info">Domani potrai generare una nuova frase</p>
    </main>

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-1" id="exampleModalLabel">Chronology <span class="count d-inline-block ms-3"></span></h1>
              <p type="button" data-bs-dismiss="modal" aria-label="Close">&#x2718;</p>
            </div>

            <div class="modal-body">
              <ul class="text-start fs-3">
              </ul>
            </div>
          </div>
        </div>
      </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
    <script>
        // localStorage.clear()
        console.log(localStorage)

        const button = document.querySelector('button');
        const info = document.querySelector('.info')
        const pearl = document.querySelector('.pearl > q');
        const list = document.querySelector('ul')
        let color = "white"
        let chronology = []
        let pearls = [
                    "Il tuo sorriso illumina la mia giornata.",
                    "Sei il mio sogno diventato realtà.",
                    "Ogni istante con te è prezioso.",
                    // "La tua presenza rende tutto migliore.",
                    // "Insieme, ogni momento è magico.",
                    // "Nel tuo sguardo trovo il mio rifugio.",
                    // "Sei la melodia che il mio cuore canta.",
                    // "Amarti è la cosa più dolce che conosca.",
                    // "Tu ed io, un destino scritto nelle stelle.",
                    // "La tua voce è la mia canzone preferita.",
                    // "Con te ogni giorno è San Valentino.",
                    // "Sei la parte migliore di me.",
                    // "Il tuo amore è la mia ispirazione quotidiana.",
                    // "Nel tuo abbraccio trovo il mio rifugio sicuro.",
                    // "Sei il mio faro nelle notti buie.",
                    // "Ogni tuo sguardo mi fa battere il cuore più forte.",
                    // "Amarti è la mia ragione di sorridere ogni giorno.",
                    // "Tu ed io, insieme per l'eternità.",
                    // "La tua dolcezza mi scioglie il cuore.",
                    // "Il tuo amore è il mio tesoro più prezioso.",
                    // "Sei la risposta a tutte le mie preghiere.",
                    // "Nessuna distanza può separare i nostri cuori.",
                    // "Le tue carezze sono come balsamo per l'anima.",
                    // "Siamo come una favola, con un lieto fine garantito.",
                    // "Sei la costante nei miei pensieri.",
                    // "Ogni momento con te è un regalo.",
                    // "In ogni tuo gesto trovo amore e gentilezza.",
                    // "Il nostro amore è una poesia senza fine.",
                    // "Il mondo diventa più bello quando sei accanto a me.",
                    // "Le tue parole dolci fanno danzare il mio cuore.",
                    // "Amarti è come respirare, essenziale per la vita.",
                    // "Sei la nota dolce nella sinfonia della mia vita.",
                    // "Il tuo amore è il mio porto sicuro in ogni tempesta.",
                    // "Sei il mio sogno che è diventato realtà.",
                    // "Il tuo amore è la mia fonte di felicità infinita.",
                    // "Ogni istante con te è un momento prezioso da conservare.",
                    // "Innamorarsi di te è stata la mia migliore avventura.",
                    // "Sei l'unico pensiero che occupa la mia mente.",
                    // "La tua bellezza è radiante come il sole all'alba.",
                    // "Il tuo sorriso fa brillare anche il giorno più grigio.",
                    // "Ogni tua parola è una carezza per il mio cuore.",
                    // "I tuoi occhi raccontano la storia del nostro amore.",
                    // "Sei il mio rifugio sicuro, il mio porto tranquillo.",
                    // "Amarti è la poesia che il mio cuore non smette di scrivere.",
                    // "Nel tuo abbraccio trovo calore e consolazione.",
                    // "Sei la parte di me che non sapevo di cercare.",
                    // "Ogni tua risata è una melodia dolce che mi incanta.",
                    // "Il nostro amore cresce ogni giorno come un giardino fiorito.",
                    // "Le tue mani sono intrecciate con le mie nella trama del destino.",
                    // "Sei il compagno di viaggio dei miei sogni e speranze.",
                    // "Nella tua presenza, il tempo sembra fermarsi.",
                    // "Amarti è come guardare le stelle, un'esperienza magica.",
                    // "Il nostro amore è la nota dolce nella sinfonia dell'universo.",
                    // "Il tuo amore è il mio rifugio nei momenti difficili.",
                    // "Sei il motivo per cui il mio cuore sorride ogni giorno.",
                    // "Nelle tue braccia trovo il comfort che cerco.",
                    // "Ogni tua risata è la melodia della mia felicità.",
                    // "Amarti è come guardare un cielo stellato, incantevole e infinito.",
                    // "Sei la calma nella tempesta della mia vita.",
                    // "Nel tuo abbraccio trovo il mio posto felice.",
                    // "Ogni tua parola è come un balsamo per il mio cuore.",
                    // "Amarti è un viaggio senza fine, ma con te ogni passo è prezioso.",
                    // "Sei il mio sogno che si è realizzato oltre ogni aspettativa.",
                    // "La tua gentilezza è un dono che mi emoziona ogni giorno.",
                    // "Nel tuo sorriso trovo la speranza per un futuro luminoso.",
                    // "Ogni giorno con te è un nuovo capitolo della nostra storia d'amore.",
                    // "Sei il mio faro luminoso nelle notti buie.",
                    // "Amarti è come osservare un tramonto, sempre affascinante.",
                    // "Sei la ragione per cui il mio cuore batte più forte.",
                    // "Nel tuo sguardo trovo la conferma del nostro legame unico.",
                    // "Ogni tua carezza è una promessa di affetto eterno.",
                    // "Amarti è come respirare, essenziale per la mia esistenza.",
                    // "Sei il mio complice nei momenti belli e nelle sfide.",
                    // "Il tuo sorriso è il mio faro nella notte.",
                    // "Ogni tuo gesto d'amore è un dono prezioso.",
                    // "Amarti è il viaggio più bello che abbia mai intrapreso.",
                    // "Sei il mio paradiso nel mondo reale.",
                    // "Nel tuo abbraccio trovo il conforto che cerco.",
                    // "Ogni istante con te è un'esperienza indimenticabile.",
                    // "Amarti è come un sogno dolce che non voglio svegliare.",
                    // "Sei il mio rifugio sicuro in ogni tempesta.",
                    // "Nelle tue parole trovo la forza per affrontare tutto.",
                    // "Ogni tuo sguardo è un promemoria del nostro amore.",
                    // "Sei la luce nella mia vita, la mia fonte di felicità.",
                    // "Nel tuo amore trovo la pace che desidero.",
                    // "Ogni tua risata è un regalo per il mio cuore.",
                    // "Sei la mia costante in un mondo in continua evoluzione.",
                    // "Amarti è come una poesia scritta nelle stelle.",
                    // "Sei la parte migliore di ogni mio giorno.",
                    // "Nel tuo abbraccio trovo la mia casa.",
                    // "Ogni momento con te è una creazione di amore.",
                    // "Sei il mio segreto più dolce e prezioso.",
                    // "Nel tuo sorriso trovo la gioia che cerco.",
                    // "Amarti è come ascoltare la mia canzone preferita, sempre.",
                    // "Sei la melodia che rende la mia vita completa.",
                    // "Nel tuo sguardo trovo un universo di emozioni.",
                    // "Ogni tuo bacio è un capitolo nuovo della nostra storia.",
                    // "Sei la ragione per cui il mio cuore batte felice.",
                    // "Amarti è il tesoro che ho sempre desiderato.",
                    // "Sei la mia realtà più bella e affascinante.",
                    // "Nel tuo amore trovo la forza per superare ogni ostacolo.",
                    // "Ogni giorno con te è un regalo che non smette di sorprendermi.",
                    // "Sei il mio complice in ogni avventura, grande o piccola.",
                    // "Nel tuo abbraccio trovo il calore che mi scalda dentro.",
                ];

        document.addEventListener("DOMContentLoaded", function () {
            button.addEventListener('click', function() {
                pearl.textContent = pearls[Math.floor(Math.random() * pearls.length)];

                if (pearls.length > 0){
                    index = pearls.indexOf(pearl.textContent)
                    pearls.splice(index, 1)
                    
                    chronology.push(pearl.textContent)
                }
                
                const saveChronology = JSON.stringify(chronology)
                const savePearls = JSON.stringify(pearls)
                const savePearl = pearl.textContent
                const saveToday = new Date().toLocaleDateString();

                localStorage.setItem("dark-mode", color)
                localStorage.setItem("chronology", saveChronology)
                localStorage.setItem("pearls", savePearls)
                localStorage.setItem("pearlGenerate", savePearl)
                localStorage.setItem("dateGenerate", saveToday);

                button.style.display = 'none';
                info.style.display = 'block'
            });

            const today = new Date().toLocaleDateString();
            if (!localStorage.getItem("dateGenerate") == today) {
                button.style.display = 'none';
                localStorage.getItem('pearls') == '[]' ? info.style.display = 'none' : info.style.display = 'block'
                pearl.textContent = localStorage.getItem("pearlGenerate")
                color = localStorage.getItem('dark-mode')
            } else {
                if (localStorage.length > 0){
                    color = localStorage.getItem('dark-mode')
                    pearls = localStorage.getItem("pearls")
                    pearls = JSON.parse(pearls)
                }
                button.style.display = 'block';
            }
            


            // STAMPA CRONOLOGIA
            if(localStorage.length > 0){
                chronology = localStorage.getItem("chronology")
                chronology = JSON.parse(chronology)
                chronology.forEach(pearl => {
                    createList = document.createElement('li')
                    createList.innerHTML = pearl
                    list.append(createList)
                })
                document.querySelector('.count').innerHTML = '('+chronology.length+'/365)'
                if(chronology.length == 3){
                    button.style.display = 'none'
                    document.querySelector('.pearls-end').style.display = 'block'
                    document.querySelector('.pearl').style.display = 'none'
                }
            }

            
            // CAMBIA TEMA
            document.querySelector('.heart').addEventListener('click', function() {
                color = setDarkMode(color)
            })
            if (localStorage.getItem('dark-mode') === "black"){
                changeTheme('#181818', 'white')
            } else if(localStorage.getItem('dark-mode') === "white"){
                changeTheme('white', 'black')
            } else if (localStorage.getItem('dark-mode') === "red"){
                changeTheme('red', 'white')
            } else if (localStorage.getItem('dark-mode') === "blue"){
                changeTheme('#0066ff', 'white')
            }
        });


        // FUNZIONI

        function setDarkMode(color){
            if (color === "white"){
                color = "black"
                changeTheme('#181818', 'white')
            } else if (color === "black"){
                color = "red"
                changeTheme('red', 'white')
            } else if (color === "red") {
                color = "blue"
                changeTheme('#0066ff', 'white')
            } else if (color === "blue") {
                color = "white"
                changeTheme('white', 'black')
            }
            localStorage.setItem('dark-mode', color)
            return color
        } 

        function changeTheme(color1, color2){
            document.querySelector('main').style.backgroundColor = color1
            document.querySelector('main').style.color = color2
            document.querySelector('.modal').style.color = color2
            document.querySelector('.modal-content').style.backgroundColor = color1
            document.querySelector('.pearl').style.border = `1px solid ${color2} ` 
        }
    </script>
</body>


<style>
    *{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        transition: 0.25s all;
        font-family: 'Qwitcher Grypen', cursive;
    }
    main{
        width: 100%;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    button{
        border: 0;
        padding: 0.5rem;
        color: white;
        border-radius: 5px;
    }
    button:hover{
        cursor: pointer;
        background-color: white !important;
        color: red;
        transform: scale(1.1);
    }
    .heart{
        color: #980000;
    }
    .pearl{
        border: 1px solid black;
    }
    .heart:hover{
        cursor: pointer;
        transform: scale(1.2);
    }
    .box:hover{
        cursor: pointer;
        transform: scale(0.98);
    }
    ::-webkit-scrollbar{
        width: 10px;
    }
    *::-webkit-scrollbar-thumb {
        background-color: #980000;
        border-radius: 10px;
        border: 1px solid #ffffff;
    }
    .pearls-end{
        display: none;
    }

   
</style>
</html>